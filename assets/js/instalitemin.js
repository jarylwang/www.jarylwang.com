!function(a){a.fn.instagramLite=function(b){if(!this.length)return this;var c={username:null,clientID:null,limit:12,list:!0,videos:!0,urls:!1,captions:!1,date:!1,likes:!1,max_id:null,loadMore:null,error:function(){},success:function(){}};self.plugin=this,self.plugin.settings={},self.plugin.settings=a.extend({},c,b),self.el=a(this),self.loadContent(),plugin.settings.loadMore&&a(plugin.settings.loadMore).on("click",function(a){a.preventDefault(),self.loadContent()})},getMaxId=function(a){return a[a.length-1].id},formatCaption=function(a){for(var b=a.split(" "),c="",d=0;d<b.length;d++){var e;if("@"==b[d][0]){var f='<a href="http://twitter.com/'+b[d].replace("@","").toLowerCase()+'" target="_blank">'+b[d]+"</a>";e=f}else if("#"==b[d][0]){var f='<a href="http://twitter.com/hashtag/'+b[d].replace("#","").toLowerCase()+'" target="_blank">'+b[d]+"</a>";e=f}else e=b[d];c+=e+" "}return c},loadContent=function(){plugin.settings.clientID&&plugin.settings.username?el.each(function(){a.ajax({type:"GET",url:"https://api.instagram.com/v1/users/search?q="+plugin.settings.username+"&client_id="+plugin.settings.clientID+"&callback=?",dataType:"jsonp",success:function(b){if(b.data.length)for(var c=0;c<b.data.length;c++){var d=b.data[c];if(d.username===plugin.settings.username){var e="https://api.instagram.com/v1/users/"+d.id+"/media/recent/?client_id="+plugin.settings.clientID+"&count="+plugin.settings.limit+"&callback=?";e+=plugin.settings.max_id?"&max_id="+plugin.settings.max_id:"",a.ajax({type:"GET",url:e,dataType:"jsonp",success:function(a){if(console.log(a),200===a.meta.code&&a.data.length){for(var b=0;b<a.data.length;b++){var c,d=a.data[b];if("image"===d.type){if(c='<img class="il-photo__img" src="'+d.images.standard_resolution.url+'" alt="Instagram Image" data-filter="'+d.filter+'" />',plugin.settings.urls&&(c='<a href="'+d.link+'" target="_blank">'+c+"</a>"),(plugin.settings.captions||plugin.settings.date||plugin.settings.likes)&&(c+='<div class="il-photo__meta">'),plugin.settings.captions&&d.caption&&(c+='<div class="il-photo__caption" data-caption-id="'+d.caption.id+'">'+self.formatCaption(d.caption.text)+"</div>"),plugin.settings.date){var e=new Date(1e3*d.created_time),f=e.getDate(),g=e.getMonth()+1,h=e.getFullYear();e.getHours(),e.getMinutes(),e.getSeconds();e=g+"/"+f+"/"+h,c+='<div class="il-photo__date">'+e+"</div>"}plugin.settings.likes&&(c+='<div class="il-photo__likes">'+d.likes.count+"</div>"),(plugin.settings.captions||plugin.settings.date||plugin.settings.likes)&&(c+="</div>")}if("video"===d.type&&plugin.settings.videos&&d.videos){var i;d.videos.standard_resolution?i=d.videos.standard_resolution.url:d.videos.low_resolution?i=d.videos.low_resolution.url:d.videos.low_bandwidth&&(i=d.videos.low_bandwidth.url),c='<video poster="'+d.images.standard_resolution.url+'" controls>',c+='<source src="'+i+'" type="video/mp4;"></source>',c+="</video>"}plugin.settings.list&&(c='<li class="il-item" data-instagram-id="'+d.id+'">'+c+"</li>"),el.append(c)}plugin.settings.max_id=self.getMaxId(a.data),plugin.settings.success.call(this)}else plugin.settings.error.call(this,a.meta.code,a.meta.error_message)},error:function(){plugin.settings.error.call(this)}});break}}else plugin.settings.error.call(this)},error:function(){plugin.settings.error.call(this)}})}):console.log("Both a client ID and username are required to use this plugin.")}}(jQuery);